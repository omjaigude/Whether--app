<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Simple Weather App</title>
    <style>
      :root {
        --bg: #0f1724;
        --card: #0b1220;
        --muted: #98a0b3;
        --accent: linear-gradient(90deg, #06b6d4, #60a5fa);
        --glass: rgba(255, 255, 255, 0.03);
        color-scheme: dark;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        min-height: 100vh;
        background: radial-gradient(
            1200px 600px at 10% 10%,
            rgba(96, 165, 250, 0.06),
            transparent
          ),
          linear-gradient(180deg, #071029 0%, #001018 100%);
        color: #e6eef8;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 32px;
      }
      .app {
        width: 100%;
        max-width: 900px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(255, 255, 255, 0.01)
        );
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(2, 6, 23, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.03);
      }
      header {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      header h1 {
        font-size: 20px;
        margin: 0;
      }
      .controls {
        display: flex;
        gap: 8px;
        margin-top: 16px;
      }
      .controls input {
        flex: 1;
        padding: 12px 14px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.04);
        background: var(--glass);
        color: inherit;
        font-size: 16px;
      }
      .controls button {
        padding: 12px 14px;
        border-radius: 10px;
        border: none;
        background: transparent;
        color: inherit;
        cursor: pointer;
        font-weight: 600;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }
      .controls button.primary {
        background: linear-gradient(90deg, #06b6d4, #60a5fa);
        color: #04263b;
        border: none;
      }
      .row {
        display: flex;
        gap: 18px;
        margin-top: 22px;
        align-items: stretch;
      }
      .card {
        flex: 1;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.015),
          rgba(255, 255, 255, 0.01)
        );
        padding: 18px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.03);
      }
      .big-temp {
        display: flex;
        align-items: center;
        gap: 18px;
      }
      .big-temp img {
        width: 96px;
        height: 96px;
      }
      .temp-value {
        font-size: 40px;
        font-weight: 700;
      }
      .meta {
        color: var(--muted);
        margin-top: 8px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-top: 12px;
      }
      .small {
        background: rgba(255, 255, 255, 0.02);
        padding: 10px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.02);
      }
      .footer {
        margin-top: 14px;
        color: var(--muted);
        font-size: 13px;
        text-align: right;
      }
      .hint {
        color: var(--muted);
        font-size: 13px;
        margin-top: 8px;
      }
      @media (max-width: 720px) {
        .row {
          flex-direction: column;
        }
        .big-temp img {
          width: 72px;
          height: 72px;
        }
        .temp-value {
          font-size: 32px;
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header>
        <svg
          width="36"
          height="36"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          aria-hidden
        >
          <path
            d="M6 14a6 6 0 1 1 12 0 6 6 0 0 1-12 0z"
            stroke="#60A5FA"
            stroke-width="1.2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M12 2v4"
            stroke="#06B6D4"
            stroke-width="1.2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <div>
          <h1>Simple Weather</h1>
          <div class="hint">
            Type city name (e.g. London) or use the 'My location' button.
          </div>
        </div>
      </header>

      <div class="controls">
        <input
          id="cityInput"
          placeholder="Enter city or 'auto' for coordinates"
          value="London"
        />
        <button id="searchBtn" class="primary">Search</button>
        <button id="locBtn" title="Use browser location">My location</button>
      </div>

      <div id="output" class="row" aria-live="polite" style="margin-top: 18px">
        <div class="card" id="cardMain">
          <div id="mainContent">
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
              "
            >
              <div>
                <div id="location" style="font-weight: 700; font-size: 18px">
                  —
                </div>
                <div id="localtime" class="meta">—</div>
              </div>
              <div id="lastUpdated" class="meta" style="text-align: right">
                —
              </div>
            </div>

            <div class="big-temp">
              <img id="condIcon" src="" alt="weather icon" />
              <div>
                <div class="temp-value">
                  <span id="temp_c">--</span>°C<span
                    class="meta"
                    style="font-size: 14px; margin-left: 8px"
                    id="condition"
                    >—</span
                  >
                </div>
                <div class="meta">
                  Feels like <span id="feelslike_c">--</span>°C • Humidity
                  <span id="humidity">--</span>%
                </div>
              </div>
            </div>

            <div class="grid">
              <div class="small">
                Wind: <strong id="wind_kph">--</strong> kph •
                <span id="wind_dir">—</span>
              </div>
              <div class="small">
                Pressure: <strong id="pressure_mb">--</strong> mb
              </div>
              <div class="small">Cloud: <strong id="cloud">--</strong>%</div>
              <div class="small">UV Index: <strong id="uv">--</strong></div>
            </div>

            <div id="aqiBlock" style="margin-top: 12px; display: none">
              <h4 style="margin: 0 0 8px 0">Air Quality</h4>
              <div class="grid">
                <div class="small">PM2.5: <strong id="pm2_5">--</strong></div>
                <div class="small">PM10: <strong id="pm10">--</strong></div>
                <div class="small">NO2: <strong id="no2">--</strong></div>
                <div class="small">
                  US AQI: <strong id="us-epa-index">--</strong>
                </div>
              </div>
            </div>
          </div>
          <div class="footer">
            ☀️ Weather App | Created by <b>Om Jaigude</b> © 2025
          </div>
        </div>
      </div>

      <div id="message" style="margin-top: 12px; color: #ffd6a5"></div>
    </div>

    <script>
      // --- CONFIG ---
      // Using the API key / URL you provided. If you want to change the key, edit apiKey below.
      const apiKey = "3234fb5bea3f4ab1b83133305251610";
      const baseUrl = "https://api.weatherapi.com/v1/current.json"; // use https for browsers

      // --- DOM ---
      const cityInput = document.getElementById("cityInput");
      const searchBtn = document.getElementById("searchBtn");
      const locBtn = document.getElementById("locBtn");
      const message = document.getElementById("message");

      // output fields
      const setText = (id, txt) => {
        const el = document.getElementById(id);
        if (el) el.textContent = txt;
      };
      const setSrc = (id, src, alt) => {
        const el = document.getElementById(id);
        if (el) {
          el.src = src;
          if (alt) el.alt = alt;
        }
      };

      async function fetchWeather(q) {
        message.textContent = "";
        try {
          const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(
            q
          )}&aqi=yes`;
          const res = await fetch(url);
          if (!res.ok) {
            const text = await res.text();
            throw new Error(
              "API error: " + res.status + " " + res.statusText + "\n" + text
            );
          }
          const data = await res.json();
          render(data);
        } catch (err) {
          console.error(err);
          message.textContent = "Error: " + (err.message || err);
          showPlaceholders();
        }
      }

      function render(data) {
        if (!data) return;
        const loc = data.location || {};
        const cur = data.current || {};
        setText(
          "location",
          `${loc.name || "—"}, ${loc.region || ""} ${loc.country || ""}`.trim()
        );
        setText("localtime", loc.localtime || "");
        setText("lastUpdated", cur.last_updated || "");
        setText("temp_c", "temp_c" in cur ? cur.temp_c : "--");
        setText("feelslike_c", "feelslike_c" in cur ? cur.feelslike_c : "--");
        setText("condition", cur.condition?.text || "—");
        setSrc(
          "condIcon",
          cur.condition?.icon ? "https:" + cur.condition.icon : "",
          cur.condition?.text || ""
        );
        setText("humidity", "humidity" in cur ? cur.humidity : "--");
        setText("wind_kph", "wind_kph" in cur ? cur.wind_kph : "--");
        setText("wind_dir", cur.wind_dir || "—");
        setText("pressure_mb", "pressure_mb" in cur ? cur.pressure_mb : "--");
        setText("cloud", "cloud" in cur ? cur.cloud : "--");
        setText("uv", "uv" in cur ? cur.uv : "--");

        // Air quality
        if (cur.air_quality) {
          document.getElementById("aqiBlock").style.display = "block";
          setText("pm2_5", Math.round(cur.air_quality["pm2_5"] || 0));
          setText("pm10", Math.round(cur.air_quality["pm10"] || 0));
          setText("no2", Math.round(cur.air_quality["no2"] || 0));
          setText("us-epa-index", cur.air_quality["us-epa-index"] ?? "--");
        } else {
          document.getElementById("aqiBlock").style.display = "none";
        }
      }

      function showPlaceholders() {
        setText("location", "—");
        setText("localtime", "—");
        setText("temp_c", "--");
        setText("condition", "—");
        setText("feelslike_c", "--");
        setText("humidity", "--");
        setText("wind_kph", "--");
        setText("pressure_mb", "--");
        setText("cloud", "--");
        setText("uv", "--");
        setSrc("condIcon", "", "");
        document.getElementById("aqiBlock").style.display = "none";
      }

      // handlers
      searchBtn.addEventListener("click", () => {
        const q = cityInput.value.trim();
        if (!q) {
          message.textContent = "Please enter a city name or use My location.";
          return;
        }
        // if user entered 'auto' or coordinates like 'lat,lon' we pass through
        fetchWeather(q);
      });

      cityInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") searchBtn.click();
      });

      locBtn.addEventListener("click", () => {
        if (!navigator.geolocation) {
          message.textContent = "Geolocation not supported in this browser.";
          return;
        }
        message.textContent = "Getting location…";
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const { latitude, longitude } = pos.coords;
            const q = `${latitude},${longitude}`;
            cityInput.value = q;
            fetchWeather(q);
          },
          (err) => {
            message.textContent = "Unable to get location: " + err.message;
          },
          { timeout: 10000 }
        );
      });

      // initial load
      (function () {
        // load default from input value
        const defaultQ = cityInput.value.trim() || "London";
        fetchWeather(defaultQ);
      })();
    </script>
  </body>
</html>
